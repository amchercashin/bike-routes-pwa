"use strict";(self.webpackChunkbike_routes_pwa=self.webpackChunkbike_routes_pwa||[]).push([[832],{832:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var n=r(43),o=r(475),s=r(337),c=r(579);const i=function(){const[e,t]=(0,n.useState)([]),[r,i]=(0,n.useState)(null),[a,u]=(0,n.useState)(!navigator.onLine);return(0,n.useEffect)((()=>{const e=()=>u(!1),t=()=>u(!0);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}),[]),(0,n.useEffect)((()=>{!async function(){try{let e=await(0,s.O5)();if(!e||!a){const t=await fetch("".concat("/bike-routes-pwa","/data/routes/index.json"));e=await t.json(),await(0,s.dt)(e)}t(e)}catch(r){console.error("Error loading routes:",r),i("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435.")}}()}),[a]),r?(0,c.jsxs)("div",{children:["\u041e\u0448\u0438\u0431\u043a\u0430: ",r]}):(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432"}),a&&(0,c.jsx)("div",{children:"\u0412\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u0432 \u043e\u0444\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u0435. \u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u044e\u0442\u0441\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u044b."}),0===e.length?(0,c.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432..."}):(0,c.jsx)("ul",{children:e.map((e=>(0,c.jsxs)("li",{children:[(0,c.jsx)(o.N_,{to:"/route/".concat(e.id),children:e.name}),(0,c.jsx)("p",{children:e.shortDescription})]},e.id)))}),(0,c.jsx)(o.N_,{to:"/",children:"\u041d\u0430\u0437\u0430\u0434 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})]})}},337:(e,t,r)=>{r.d(t,{Fq:()=>i,O5:()=>l,aM:()=>a,dt:()=>d,wp:()=>u});const n="BikeRoutesDB",o="routes",s="catalog";function c(){return new Promise(((e,t)=>{const r=indexedDB.open(n,8);r.onerror=e=>{console.error("Database error: "+e.target.error),t("Error opening DB: "+e.target.error)},r.onsuccess=t=>{e(t.target.result)},r.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(o)){t.createObjectStore(o,{keyPath:"id"}).createIndex("version","version",{unique:!1})}t.objectStoreNames.contains(s)||t.createObjectStore(s,{keyPath:"id"})}}))}function i(e){return new Promise(((t,r)=>{c().then((n=>{const s=n.transaction(o,"readwrite").objectStore(o).put(e);s.onerror=()=>r("Error saving route"),s.onsuccess=()=>t()})).catch(r)}))}function a(e){return new Promise(((t,r)=>{c().then((n=>{const s=n.transaction(o,"readonly").objectStore(o).get(e);s.onerror=()=>r("Error getting route"),s.onsuccess=()=>t(s.result)})).catch(r)}))}function u(e){return new Promise(((t,r)=>{c().then((n=>{const s=n.transaction(o,"readonly").objectStore(o).get(e);s.onerror=()=>r("Error getting route version"),s.onsuccess=()=>t(s.result?s.result.version:null)})).catch(r)}))}function d(e){return new Promise(((t,r)=>{c().then((n=>{const o=n.transaction(s,"readwrite").objectStore(s).put({id:"main",data:e});o.onerror=()=>r("Error saving catalog"),o.onsuccess=()=>t()})).catch(r)}))}function l(){return new Promise(((e,t)=>{c().then((r=>{const n=r.transaction(s,"readonly").objectStore(s).get("main");n.onerror=()=>t("Error getting catalog"),n.onsuccess=()=>e(n.result?n.result.data:null)})).catch(t)}))}}}]);
//# sourceMappingURL=832.8fe003bf.chunk.js.map